### VS Code REST Client 测试文件
### 使用 VS Code 的 REST Client 插件运行这些请求

@baseUrl = http://localhost:8000

### ============= 健康检查 =============

### 1. 根路径
GET {{baseUrl}}/

### 2. 健康检查
GET {{baseUrl}}/health


### ============= 测试数据管理 =============

### 3. 初始化测试数据
POST {{baseUrl}}/api/test/init-data

### 4. 清空所有数据
DELETE {{baseUrl}}/api/test/clear-data


### ============= 库存管理 API =============

### 5. 添加商品库存
POST {{baseUrl}}/api/inventory/products
Content-Type: application/json

{
  "product_id": "P999",
  "quantity": 50
}

### 6. 查询商品库存
GET {{baseUrl}}/api/inventory/products/P001

### 7. 获取所有库存
GET {{baseUrl}}/api/inventory/products

### 8. 移除商品
DELETE {{baseUrl}}/api/inventory/products/P999


### ============= 订单管理 API =============

### 9. 创建订单
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD001",
  "customer_id": "CUST001"
}

### 10. 添加订单项 - 商品1
POST {{baseUrl}}/api/orders/ORD001/items
Content-Type: application/json

{
  "product_id": "P001",
  "quantity": 2,
  "price": 50.0
}

### 11. 添加订单项 - 商品2
POST {{baseUrl}}/api/orders/ORD001/items
Content-Type: application/json

{
  "product_id": "P002",
  "quantity": 1,
  "price": 100.0
}

### 12. 获取订单详情
GET {{baseUrl}}/api/orders/ORD001

### 13. 获取所有订单
GET {{baseUrl}}/api/orders

### 14. 确认订单
POST {{baseUrl}}/api/orders/ORD001/confirm

### 15. 处理支付 - 支付宝
POST {{baseUrl}}/api/orders/ORD001/payment
Content-Type: application/json

{
  "payment_method": "alipay"
}

### 16. 发货
POST {{baseUrl}}/api/orders/ORD001/ship

### 17. 完成订单
POST {{baseUrl}}/api/orders/ORD001/complete


### ============= 支付管理 API =============

### 18. 获取支付信息
GET {{baseUrl}}/api/payments/PAY_ORD001

### 19. 查询支付宝余额
GET {{baseUrl}}/api/payments/balance/alipay

### 20. 查询微信余额
GET {{baseUrl}}/api/payments/balance/wechat


### ============= 异常场景测试 =============

### 21. 测试库存不足
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD_NO_STOCK",
  "customer_id": "CUST002"
}

###
POST {{baseUrl}}/api/orders/ORD_NO_STOCK/items
Content-Type: application/json

{
  "product_id": "P001",
  "quantity": 1000,
  "price": 50.0
}

###
POST {{baseUrl}}/api/orders/ORD_NO_STOCK/confirm

### 22. 测试重复订单ID
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD001",
  "customer_id": "CUST003"
}

### 23. 查询不存在的商品
GET {{baseUrl}}/api/inventory/products/P999999


### ============= 订单取消流程 =============

### 24. 创建待取消订单
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD_CANCEL",
  "customer_id": "CUST004"
}

### 25. 添加商品
POST {{baseUrl}}/api/orders/ORD_CANCEL/items
Content-Type: application/json

{
  "product_id": "P001",
  "quantity": 5,
  "price": 50.0
}

### 26. 确认订单
POST {{baseUrl}}/api/orders/ORD_CANCEL/confirm

### 27. 取消订单
POST {{baseUrl}}/api/orders/ORD_CANCEL/cancel

### 28. 验证库存恢复
GET {{baseUrl}}/api/inventory/products/P001


### ============= 多支付方式测试 =============

### 29. 微信支付订单
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD_WECHAT",
  "customer_id": "CUST005"
}

###
POST {{baseUrl}}/api/orders/ORD_WECHAT/items
Content-Type: application/json

{
  "product_id": "P002",
  "quantity": 1,
  "price": 80.0
}

###
POST {{baseUrl}}/api/orders/ORD_WECHAT/confirm

###
POST {{baseUrl}}/api/orders/ORD_WECHAT/payment
Content-Type: application/json

{
  "payment_method": "wechat"
}

### 30. 信用卡支付订单
POST {{baseUrl}}/api/orders
Content-Type: application/json

{
  "order_id": "ORD_CREDIT",
  "customer_id": "CUST006"
}

###
POST {{baseUrl}}/api/orders/ORD_CREDIT/items
Content-Type: application/json

{
  "product_id": "P003",
  "quantity": 3,
  "price": 30.0
}

###
POST {{baseUrl}}/api/orders/ORD_CREDIT/confirm

###
POST {{baseUrl}}/api/orders/ORD_CREDIT/payment
Content-Type: application/json

{
  "payment_method": "credit_card"
}
